<style type="text/css">
  .input-wrap {
    position: relative;
  }
  .fa {
    position: absolute;
    margin-left: 5px;
    margin-top: 7px;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s;
  }
  .fa.visible {
    opacity: 1;
    visibility: visible;
  }
</style>
<p class="form-group">
  
  <label for="ip"><span data-i18n="pair.start.ip"></span>
  </label>
  <span class="input-wrap">
    <input type="text" id="ip" placeholder="192.168.1.2" value="192.168.1.2" />
  </span>
  <br/>
  <br/>  
  <button class="button" id="validate"><span data-i18n="pair.start.saveSettings"></span>
  </button>
  <i class="nhc-status nhc-loading fa fa-circle-o-notch fa-spin">
  </i>
  <i class="nhc-status nhc-ok fa fa-check" style="color: #96ff00;">
  </i>
  <i class="nhc-status nhc-err fa fa-times" style="color: #ff6300;">
  </i>
</p>
<p class="nhc-err-msg" style="color: #ff6300;">
</p>

<script type="text/javascript">
	Homey.setTitle(__('pair.setup'));
    $(function() {
        $('#validate').click(function() {


            // variables
            var ip = document.getElementById('ip').value;
           
            // ip is required
            if (ip == "") {
                // Give error, required values
                Homey.alert(__('pair.start.required'), 'error');
                return;
                // Homey.done() would close the pairing window, but we want to give the user the chance to correct and resubmit
            }
            $('.nhc-status').removeClass('visible');
            $('.nhc-loading').addClass('visible');
            Homey.emit('set_settings', {
                ip: ip
            }, function(err, result) {
                $('.nhc-status').removeClass('visible');
                if (!err) {
                    $('.nhc-ok').addClass('visible');
                    $('.nhc-err-msg').html('');
                    
					Homey.nextView();					
                    
                } else {
                    $('.nhc-err').addClass('visible');
                    $('.nhc-err-msg').html(err.message || err.toString());
                }
            })
        });
    })
</script>